{"version":3,"file":"useState.modern.mjs","sources":["../src/useState.js"],"sourcesContent":["let state = []\nlet cursor = -1\n\nfunction useState(initialState) {\n  const current = cursor++\n  const setter = (value) => {\n    state[current] = typeof value === 'function' ? value() : value\n    if (useState.dispatch)\n      Promise.resolve(state[current]).then(\n        () => useState.flush() && useState.dispatch()\n      )\n  }\n  return [state[current] || initialState, setter]\n}\n\n// internal, only used for tests\nuseState.__reset = () => {\n  state = []\n  cursor = []\n  useState.flush()\n}\n\nuseState.flush = () => (cursor = -1)\n\nmodule.exports = useState\n"],"names":["state","cursor","useState","initialState","current","value","dispatch","Promise","resolve","then","flush","__reset","module","exports"],"mappings":"AAAA,IAAIA,EAAQ,GACRC,GAAU,EAEd,SAASC,EAASC,GAChB,MAAMC,EAAUH,IAQhB,MAAO,CAACD,EAAMI,IAAYD,EAPVE,IACdL,EAAMI,GAA4B,mBAAVC,EAAuBA,IAAUA,EACrDH,EAASI,UACXC,QAAQC,QAAQR,EAAMI,IAAUK,KAC9B,IAAMP,EAASQ,SAAWR,EAASI,cAO3CJ,EAASS,QAAU,KACjBX,EAAQ,GACRC,EAAS,GACTC,EAASQ,SAGXR,EAASQ,MAAQ,IAAOT,GAAU,EAElCW,OAAOC,QAAUX"}