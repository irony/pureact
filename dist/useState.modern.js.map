{"version":3,"file":"useState.modern.js","sources":["../src/useState.js"],"sourcesContent":["let state = []\nlet cursor = -1\n\nfunction useState(initialState) {\n  const current = cursor++\n  const setter = (value) => {\n    state[current] = typeof value === 'function' ? value() : value\n    if (useState.dispatch) Promise.resolve(state[current]).then(() => useState.flush() && useState.dispatch())\n  }\n  return [state[current] || initialState, setter]\n}\n\n// internal, only used for tests\nuseState.__reset = () => {\n  state = []\n  cursor = []\n  useState.flush()\n}\n\nuseState.flush = () => cursor = -1\n\nmodule.exports = useState\n"],"names":["state","cursor","useState","initialState","current","value","dispatch","Promise","resolve","then","flush","__reset","module","exports"],"mappings":"AAAA,IAAIA,EAAQ,GACRC,GAAU,EAEd,SAASC,EAASC,GAChB,MAAMC,EAAUH,IAKhB,MAAO,CAACD,EAAMI,IAAYD,EAJVE,IACdL,EAAMI,GAA4B,mBAAVC,EAAuBA,IAAUA,EACrDH,EAASI,UAAUC,QAAQC,QAAQR,EAAMI,IAAUK,KAAK,IAAMP,EAASQ,SAAWR,EAASI,cAMnGJ,EAASS,QAAU,KACjBX,EAAQ,GACRC,EAAS,GACTC,EAASQ,SAGXR,EAASQ,MAAQ,IAAMT,GAAU,EAEjCW,OAAOC,QAAUX"}