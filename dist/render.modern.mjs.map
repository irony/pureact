{"version":3,"file":"render.modern.mjs","sources":["../src/render.js"],"sourcesContent":["const snabbdom = require('snabbdom')\nconst patch = snabbdom.init([\n  require('snabbdom/modules/class').default,\n  require('snabbdom/modules/props').default,\n  require('snabbdom/modules/style').default,\n  require('snabbdom/modules/attributes').default,\n  require('snabbdom/modules/eventlisteners').default,\n])\nconst h = require('snabbdom/h').default\nconst omit = (o, fields) =>\n  Object.keys(o).reduce(\n    (a, b) => (!fields.includes(b) ? Object.assign(a, { [b]: o[b] }) : a),\n    {}\n  )\nconst shadowRoot = (child) => h('span', {}, child.map(deflate)) // Should be replaced with reference to parent instead?\nconst deflate = (child) =>\n  child\n    ? Array.isArray(child)\n      ? shadowRoot(child)\n      : child.tagName\n      ? vtree(child)\n      : child\n    : ''\nfunction vtree(tree) {\n  const props = omit(tree, ['element', 'children', 'style', 'tagName'])\n  const children = tree.children && tree.children.map(deflate)\n  return h(\n    tree.tagName,\n    {\n      props,\n      style: tree.style,\n      attrs: props.attrs || (props.properties || {}).attributes,\n    },\n    children\n  )\n}\nfunction render(tree, node, oldTree) {\n  const newTree = vtree(tree)\n  if (oldTree) {\n    patch(oldTree, newTree)\n  } else {\n    patch(node, newTree)\n  }\n  return newTree\n}\nmodule.exports = render\n"],"names":["patch","require","init","default","h","deflate","child","Array","isArray","map","shadowRoot","tagName","vtree","tree","props","o","fields","Object","keys","reduce","a","b","includes","assign","[object Object]","children","style","attrs","properties","attributes","module","exports","node","oldTree","newTree"],"mappings":"AAAA,MACMA,EADWC,QAAQ,YACFC,KAAK,CAC1BD,QAAQ,0BAA0BE,QAClCF,QAAQ,0BAA0BE,QAClCF,QAAQ,0BAA0BE,QAClCF,QAAQ,+BAA+BE,QACvCF,QAAQ,mCAAmCE,UAEvCC,EAAIH,QAAQ,cAAcE,QAO1BE,EAAWC,GACfA,EACIC,MAAMC,QAAQF,GAHAA,CAAAA,GAAUF,EAAE,OAAQ,GAAIE,EAAMG,IAAIJ,IAI9CK,CAAWJ,GACXA,EAAMK,QACNC,EAAMN,GACNA,EACF,GACN,SAASM,EAAMC,GACb,MAAMC,GAfMC,EAeOF,EAfJG,EAeU,CAAC,UAAW,WAAY,QAAS,WAd1DC,OAAOC,KAAKH,GAAGI,OACb,CAACC,EAAGC,IAAQL,EAAOM,SAASD,GAAuCD,EAAlCH,OAAOM,OAAOH,EAAG,CAAEI,CAACH,GAAIN,EAAEM,KAC3D,KAHS,IAACN,EAAGC,EAgBf,MAAMS,EAAWZ,EAAKY,UAAYZ,EAAKY,SAAShB,IAAIJ,GACpD,OAAOD,EACLS,EAAKF,QACL,CACEG,MAAAA,EACAY,MAAOb,EAAKa,MACZC,MAAOb,EAAMa,QAAUb,EAAMc,YAAc,IAAIC,YAEjDJ,GAYJK,OAAOC,QATP,SAAgBlB,EAAMmB,EAAMC,GAC1B,MAAMC,EAAUtB,EAAMC,GAMtB,OAJEb,EADEiC,GAGID,EAFSE,GAIVA"}